{"version":3,"sources":["controllers-flyone.js"],"names":["r","e","n","t","o","i","f","c","require","u","a","Error","code","p","exports","call","length","1","module","rentalcarsIframeCtrl","$scope","$sce","backend","constructUrl","params","newUrl","Object","keys","map","key","vm","baseRentalCarsUrl","this","defaultHeight","DEFAULT_PARAMS","affiliateCode","pickupIATACode","pickupHour","pickUpMinute","returnHour","returnMinute","pickupDate","pickupMonth","pickupYear","returnDate","returnMonth","returnYear","prefLang","results","showRentalCarsIframe","destionation","$watchCollection","angular","bind","searchParams","newSearchParams","segments","destination","date","split","newParams","_","clone","codeEn","$onInit","console","log","app","filter","url","trustAsResourceUrl","component","controllerAs","bindings","lang","templateUrl","controller","2","./components/rentalcars/rentalcars"],"mappings":"CAAA,WAAY,QAASA,GAAEC,EAAEC,EAAEC,GAAG,QAASC,GAAEC,EAAEC,GAAG,IAAIJ,EAAEG,GAAG,CAAC,IAAIJ,EAAEI,GAAG,CAAC,GAAIE,GAAE,kBAAmBC,UAASA,OAAQ,KAAIF,GAAGC,EAAE,MAAOA,GAAEF,GAAE,EAAI,IAAGI,EAAE,MAAOA,GAAEJ,GAAE,EAAI,IAAIK,GAAE,GAAIC,OAAM,uBAAuBN,EAAE,IAAK,MAAMK,GAAEE,KAAK,mBAAmBF,EAAE,GAAIG,GAAEX,EAAEG,IAAIS,WAAYb,GAAEI,GAAG,GAAGU,KAAKF,EAAEC,QAAQ,SAASd,GAAG,GAAIE,GAAED,EAAEI,GAAG,GAAGL,EAAG,OAAOI,GAAEF,GAAGF,IAAIa,EAAEA,EAAEC,QAAQd,EAAEC,EAAEC,EAAEC,GAAG,MAAOD,GAAEG,GAAGS,QAAQ,IAAI,GAAIL,GAAE,kBAAmBD,UAASA,QAAQH,EAAE,EAAEA,EAAEF,EAAEa,OAAOX,IAAID,EAAED,EAAEE,GAAI,OAAOD,GAAE,MAAOJ,OAAOiB,GAAG,SAAST,EAAQU,EAAOJ,GACxe,YAoBA,SAASK,GAAqBC,EAAQC,EAAMC,GAqDxC,QAASC,GAAaC,GAClB,GAAIC,GAAS,gDACbC,QAAOC,KAAKH,GAAQI,IAAI,SAAUC,GAC9BJ,GAAUI,EAAM,IAAML,EAAOK,GAAO,MAGxCC,EAAGC,kBAAoBN,EA1D3B,GAAIK,GAAKE,IAETF,GAAGC,kBAAoB,iDACvBD,EAAGG,cAAgB,IACnBH,EAAGI,gBACCC,cAAe,SACfC,eAAgB,MAChBC,WAAY,GACZC,aAAc,GACdC,WAAY,GACZC,aAAc,GACdC,WAAY,EACZC,YAAa,EACbC,WAAY,KACZC,WAAY,EACZC,YAAa,EACbC,WAAY,KACZC,SAAU,KACVC,QAAS,GAEblB,EAAGmB,sBAAuB,EAC1BnB,EAAGoB,aAAe,KAElB9B,EAAO+B,iBAAiBC,QAAQC,KAAKrB,KAAM,WACvC,MAAOF,GAAGwB,eACV,SAAUC,GACVzB,EAAGoB,aAAeK,EAAgBC,SAAS,GAAGC,YAC9C3B,EAAG4B,KAAOH,EAAgBC,SAAS,GAAGE,KAAKC,MAAM,IAEjD,IAAIC,GAAYC,EAAEC,MAAMhC,EAAGI,eAGvBJ,GAAG4B,MAAQ5B,EAAGoB,eACdU,EAAUxB,eAAiBN,EAAGoB,aAAaa,OAG3CH,EAAUnB,WAAaX,EAAG4B,KAAK,GAC/BE,EAAUlB,YAAcZ,EAAG4B,KAAK,GAChCE,EAAUjB,WAAab,EAAG4B,KAAK,GAE/B5B,EAAGmB,sBAAuB,GAI9B1B,EAAaqC,KAGjB9B,EAAGkC,QAAU,WACTzC,EAAaO,EAAGI,gBAChB+B,QAAQC,IAAI9C,IArEpB,GAAI+C,GAAMf,QAAQlC,OAAO,MACzBiD,GAAIC,OAAO,YAAa,OAAQ,SAAU/C,GACtC,MAAO,UAAUgD,GACb,MAAOhD,GAAKiD,mBAAmBD,OAIvCF,EAAII,UAAU,oBACVC,aAAc,KACdC,UACInB,aAAc,IACdoB,KAAM,KAEVC,YAAa,wCACbC,WAAY,yBAGhBT,EAAIS,WAAW,wBAAyB,SAAU,OAAQ,UAAWzD,SAiE/D0D,GAAG,SAASrE,EAAQU,EAAOJ,GACjC,YACAN,GAAQ,wCACLsE,qCAAqC,SAAS","file":"controllers-flyone.js","sourcesContent":["(function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c=\"function\"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error(\"Cannot find module '\"+i+\"'\");throw a.code=\"MODULE_NOT_FOUND\",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u=\"function\"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()({1:[function(require,module,exports){\n\"use strict\";\nvar app = angular.module('app');\napp.filter('trustUrl', ['$sce', function ($sce) {\n    return function (url) {\n        return $sce.trustAsResourceUrl(url);\n    }\n}]);\n\napp.component('rentalcarsIframe', {\n    controllerAs: 'vm',\n    bindings: {\n        searchParams: '<',\n        lang: '<'\n    },\n    templateUrl: 'components/rentalcars/rentalcars.html',\n    controller: 'rentalcarsIframeCtrl'\n});\n\napp.controller('rentalcarsIframeCtrl', ['$scope', '$sce', 'backend', rentalcarsIframeCtrl]);\n\nfunction rentalcarsIframeCtrl($scope, $sce, backend) {\n    var vm = this;\n\n    vm.baseRentalCarsUrl = 'https://secure.rentalcars.com/WidgetSearch.do?';\n    vm.defaultHeight = 150;\n    vm.DEFAULT_PARAMS = {\n        affiliateCode: 'flyone',\n        pickupIATACode: 'KIV',\n        pickupHour: 12,\n        pickUpMinute: 30,\n        returnHour: 10,\n        returnMinute: 30,\n        pickupDate: 5,\n        pickupMonth: 9,\n        pickupYear: 2018,\n        returnDate: 9,\n        returnMonth: 9,\n        returnYear: 2018,\n        prefLang: 'ru',\n        results: 3\n    };\n    vm.showRentalCarsIframe = false;\n    vm.destionation = null;\n\n    $scope.$watchCollection(angular.bind(this, function () {\n        return vm.searchParams\n    }), function (newSearchParams) {\n        vm.destionation = newSearchParams.segments[0].destination;\n        vm.date = newSearchParams.segments[0].date.split('.');\n\n        var newParams = _.clone(vm.DEFAULT_PARAMS);\n\n\n        if (vm.date && vm.destionation) {\n            newParams.pickupIATACode = vm.destionation.codeEn;\n\n\n            newParams.pickupDate = vm.date[0];\n            newParams.pickupMonth = vm.date[1];\n            newParams.pickupYear = vm.date[2];\n\n            vm.showRentalCarsIframe = true;\n        }\n\n\n        constructUrl(newParams);\n    });\n\n    vm.$onInit = function () {\n        constructUrl(vm.DEFAULT_PARAMS);\n        console.log($scope);\n    };\n\n    function constructUrl(params) {\n        var newUrl = 'https://secure.rentalcars.com/WidgetSearch.do?';\n        Object.keys(params).map(function (key) {\n            newUrl += key + '=' + params[key] + '&';\n        });\n\n        vm.baseRentalCarsUrl = newUrl;\n    }\n}\n\n},{}],2:[function(require,module,exports){\n\"use strict\";\nrequire('./components/rentalcars/rentalcars');\n},{\"./components/rentalcars/rentalcars\":1}]},{},[2]);\n"]}